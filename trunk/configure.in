
AC_INIT(src/main.cpp)

VERSION="0.1-beta1"

dnl Test for subversion presence, if so, use the subversion revision number
if test -e ".svn"; then
	SVN_VERSION=`svn info | grep Revision | cut -f2 -d ' '`
	VERSION=${VERSION}.cvs${SVN_VERSION}
fi

AM_INIT_AUTOMAKE([ninja-engine], ${VERSION})
AM_CONFIG_HEADER(config.h)

# <HACK>
# Dont know if this part is the way to do this
# checks if we are cross compiling, then sets our LDFLAGS correctly
# this is for MINGW32 only
if test "${CROSS_COMPILE}" = "y"; then
	echo "FIXME: Evil crosscompiling hack.  See configure.in"
  AM_LDFLAGS="-ggdb -lalleg --subsystem,windows -lm -mno-cygwin -lstdc++"
	AC_SUBST(AM_LDFLAGS)
fi
# </HACK>

AC_PROG_CC
AC_PROG_CXX
AC_PROG_INSTALL

AC_OBJEXT
AC_EXEEXT

AC_CHECK_HEADERS([allegro.h])

# gen compiler args
#AC_SUBST(SDL_CFLAGS)
#AC_SUBST(SDL_LIBS)
#AC_SUBST(SDL_DEFS)

AC_OUTPUT(Makefile src/Makefile)
